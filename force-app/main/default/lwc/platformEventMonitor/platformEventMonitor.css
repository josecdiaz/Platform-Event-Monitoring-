/* ── Root ──────────────────────────────────────────────────────────────────── */
.pem-root {
    font-family: 'Salesforce Sans', Arial, sans-serif;
    padding: 1rem;
    background: #f3f2f2;
    min-height: 100vh;
}

/* ── Header ────────────────────────────────────────────────────────────────── */
.pem-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.75rem;
    background: #fff;
    border-radius: 0.25rem;
    padding: 0.875rem 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 1px 3px rgba(0,0,0,.1);
}

.pem-header-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.pem-header-title h1 {
    margin: 0;
    font-weight: 700;
    font-size: 1.125rem;
    color: #181818;
}

.pem-filters {
    display: flex;
    align-items: flex-end;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.pem-search {
    min-width: 220px;
}

.pem-type-filter {
    min-width: 200px;
}

/* ── Loading / Error ────────────────────────────────────────────────────────── */
.pem-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 3rem 1rem;
    color: #706e6b;
}

.pem-error-banner {
    margin-bottom: 1rem;
    border-radius: 0.25rem;
    padding: 0.75rem 1rem;
}

/* ── Table ──────────────────────────────────────────────────────────────────── */
.pem-table-wrapper {
    background: #fff;
    border-radius: 0.25rem;
    box-shadow: 0 1px 3px rgba(0,0,0,.1);
    overflow-x: auto;
}

.pem-table {
    width: 100%;
}

.pem-th {
    background: #f3f2f2;
    font-weight: 700;
    font-size: 0.75rem;
    color: #444;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    padding: 0.625rem 0.75rem;
    white-space: nowrap;
}

.pem-th-name    { width: 22%; }
.pem-th-label   { width: 20%; }
.pem-th-type    { width: 18%; }
.pem-th-channel { width: 22%; }
.pem-th-count   { width: 8%;  text-align: center; }
.pem-th-action  { width: 10%; }

.pem-row {
    border-bottom: 1px solid #e0e5ee;
    transition: background 0.15s;
}

.pem-row:hover {
    background: #f8f8f8;
}

.pem-row-subscribed {
    background: #eaf5fe;
}

.pem-row-subscribed:hover {
    background: #d9eefb;
}

.pem-td-count {
    text-align: center;
}

.pem-api-name code,
.pem-channel code {
    font-size: 0.8rem;
    background: #f3f2f2;
    padding: 0.1rem 0.25rem;
    border-radius: 0.2rem;
    color: #5c5c5c;
}

.pem-no-events {
    color: #b0adb0;
}

/* ── Type badges ────────────────────────────────────────────────────────────── */
.pem-badge-custom    { --sds-c-badge-color-background: #d4e4ff; color: #0c398a; }
.pem-badge-cdc       { --sds-c-badge-color-background: #d4f5d4; color: #1d6031; }
.pem-badge-standard  { --sds-c-badge-color-background: #fff0d4; color: #7a4400; }
.pem-badge-warn      { --sds-c-badge-color-background: #ffe0d4; color: #7a1a00; }
.pem-badge-count     { --sds-c-badge-color-background: #0176d3; color: #fff; }

/* ── Table footer ───────────────────────────────────────────────────────────── */
.pem-table-footer {
    padding: 0.5rem 1rem;
    border-top: 1px solid #e0e5ee;
    background: #fafafa;
    border-radius: 0 0 0.25rem 0.25rem;
}

.pem-count-text {
    color: #706e6b;
}

/* ── Empty state ────────────────────────────────────────────────────────────── */
.pem-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 3rem 1rem;
    color: #706e6b;
    gap: 0.5rem;
}

.pem-empty-icon {
    color: #b0adb0;
    margin-bottom: 0.5rem;
}

/* ── Live events panel ──────────────────────────────────────────────────────── */
.pem-live-panel {
    background: #fff;
    border-radius: 0.25rem;
    box-shadow: 0 1px 3px rgba(0,0,0,.1);
    overflow: hidden;
}

.pem-live-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e0e5ee;
    background: #f8f8f8;
    flex-wrap: wrap;
}

.pem-live-icon {
    color: #0176d3;
    flex-shrink: 0;
}

.pem-live-header h2 {
    margin: 0;
    font-weight: 700;
    white-space: nowrap;
}

/* Pulsing animation for live icon */
@keyframes pem-pulse {
    0%, 100% { opacity: 1; }
    50%       { opacity: 0.4; }
}

.pem-pulse {
    animation: pem-pulse 1.8s ease-in-out infinite;
}

/* ── Tab strip ──────────────────────────────────────────────────────────────── */
.pem-tab-strip {
    display: flex;
    gap: 0.25rem;
    flex-wrap: wrap;
    flex: 1;
}

.pem-tab {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.3rem 0.75rem;
    border: 1px solid #c9c7c5;
    border-radius: 1rem;
    background: #fff;
    cursor: pointer;
    font-size: 0.8125rem;
    color: #444;
    transition: all 0.15s;
}

.pem-tab:hover {
    background: #e8e8e8;
}

.pem-tab-active {
    background: #0176d3;
    border-color: #0176d3;
    color: #fff;
    font-weight: 600;
}

.pem-tab code {
    font-size: 0.75rem;
}

.pem-tab-active code {
    color: #fff;
}

.pem-tab-badge {
    display: inline-block;
    background: rgba(255,255,255,0.3);
    color: inherit;
    border-radius: 0.75rem;
    padding: 0 0.375rem;
    font-size: 0.7rem;
    font-weight: 700;
    min-width: 1.25rem;
    text-align: center;
}

.pem-tab:not(.pem-tab-active) .pem-tab-badge {
    background: #0176d3;
    color: #fff;
}

.pem-live-actions {
    margin-left: auto;
}

/* ── Waiting state ──────────────────────────────────────────────────────────── */
.pem-waiting {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2.5rem;
    color: #706e6b;
    gap: 0.75rem;
}

/* ── Event list ─────────────────────────────────────────────────────────────── */
.pem-event-list {
    max-height: 60vh;
    overflow-y: auto;
}

/* ── Event card ─────────────────────────────────────────────────────────────── */
.pem-event-card {
    border-bottom: 1px solid #e8e8e8;
    padding: 0.75rem 1rem;
    transition: background 0.1s;
}

.pem-event-card:hover {
    background: #f8fafd;
}

.pem-event-card:last-child {
    border-bottom: none;
}

.pem-event-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.pem-event-meta {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    flex-wrap: wrap;
    font-size: 0.8125rem;
    color: #444;
}

.pem-event-time {
    font-weight: 600;
    color: #181818;
}

.pem-event-sep {
    color: #b0adb0;
}

.pem-event-replay code,
.pem-event-publisher code {
    font-size: 0.75rem;
    background: #f3f2f2;
    padding: 0.1rem 0.2rem;
    border-radius: 0.15rem;
}

/* ── Payload section ────────────────────────────────────────────────────────── */
.pem-payload-section {
    margin-top: 0.375rem;
}

.pem-payload-label {
    margin-bottom: 0.25rem;
}

.pem-payload-toggle {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.8125rem;
    font-weight: 600;
    color: #0176d3;
    padding: 0.1rem 0.25rem;
    border-radius: 0.2rem;
    transition: background 0.1s;
}

.pem-payload-toggle:hover {
    background: #e8f0fe;
    color: #014486;
}

.pem-payload-toggle-secondary {
    color: #706e6b;
    font-weight: 400;
    font-size: 0.75rem;
}

.pem-payload-toggle-secondary:hover {
    background: #f3f2f2;
    color: #444;
}

.pem-payload-viewer {
    background: #1b2333;
    border-radius: 0.25rem;
    padding: 0.75rem 1rem;
    overflow-x: auto;
    margin-top: 0.25rem;
    --jv-string-color: #98c379;
    --jv-number-color: #d19a66;
    --jv-boolean-color: #e06c75;
    --jv-null-color: #abb2bf;
    --jv-key-color: #61afef;
}

.pem-payload-viewer .jv-type-string  { color: #98c379; }
.pem-payload-viewer .jv-type-number  { color: #d19a66; }
.pem-payload-viewer .jv-type-boolean { color: #e06c75; }
.pem-payload-viewer .jv-type-null    { color: #abb2bf; }
.pem-payload-viewer .jv-key         { color: #61afef; }
.pem-payload-viewer .jv-bracket     { color: #abb2bf; }
.pem-payload-viewer .jv-colon       { color: #abb2bf; }
.pem-payload-viewer .jv-comma       { color: #abb2bf; }
.pem-payload-viewer .jv-count       { color: #5c6370; }
.pem-payload-viewer .jv-toggle-btn  { color: #abb2bf; }
.pem-payload-viewer .jv-children    { border-left-color: #3e4451; }

.pem-payload-viewer-secondary {
    background: #f3f2f2;
}

.pem-payload-viewer-secondary .jv-type-string  { color: #216e4e; }
.pem-payload-viewer-secondary .jv-type-number  { color: #0747a6; }
.pem-payload-viewer-secondary .jv-type-boolean { color: #bf2600; }

/* ── Toggle icons ───────────────────────────────────────────────────────────── */
.pem-toggle-icon {
    display: inline-block;
    width: 0;
    height: 0;
}

.pem-icon-down {
    border-left:  4px solid transparent;
    border-right: 4px solid transparent;
    border-top:   5px solid currentColor;
}

.pem-icon-right {
    border-top:    4px solid transparent;
    border-bottom: 4px solid transparent;
    border-left:   5px solid currentColor;
}

/* ── Responsive ─────────────────────────────────────────────────────────────── */
@media (max-width: 768px) {
    .pem-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .pem-filters {
        width: 100%;
    }

    .pem-search,
    .pem-type-filter {
        min-width: 100%;
    }

    .pem-live-header {
        flex-direction: column;
        align-items: flex-start;
    }
}
